name: Autopost Instagram

on:
  schedule:
    - cron: "30 15 * * *"  # 7:30 AM America/Vancouver (PST)
    - cron: "30 23 * * *"  # 3:30 PM America/Vancouver (PST)
  workflow_dispatch:


jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Install deps (if needed)
        run: npm ci
        # If your scripts don't need deps, remove this line

      - name: Run Instagram publisher
        env:
          IG_BUSINESS_ID: ${{ secrets.IG_BUSINESS_ID }}
          FB_PAGE_ACCESS_TOKEN: ${{ secrets.FB_PAGE_ACCESS_TOKEN }}
        run: node scripts/publish_instagram.js
